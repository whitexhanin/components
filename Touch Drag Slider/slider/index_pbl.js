
window.addEventListener('load',function(){
    let sliderUse = new Sliders(sliderSet);    
})

const sliderSet = [
    // {
    //     idNum : '1',
    //     // 이동할 갯수
    //     viewer : 4 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:15,
    //     margin:42,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },   
    // {
    //     idNum : '2',
    //     viewer : 4 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:15,
    //     margin:42,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },     
    // {
    //     idNum : '3',
    //     viewer : 1 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },     
    // {
    //     idNum : '4',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,                
    //     gap:10,
    //     margin:5,
    //     join:true,
    //     joinsliderid:'5',
    //     joinsliderviewer:1,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },    
    // // {
    // //     idNum : '5',
    // //     viewer : 1 ,
    // //     pagination : false,
    // //     numberpage : false,
    // //     gap:0,
    // //     margin:0,
    // //     join:true,
    // //     joinsliderid:'4',
    // //     joinsliderviewer:1,
    // //     option : [
    // //         {
    // //             loop : false,     
    // //             autoplay: false,
    // //             speed: '3000'         

    // //         }          
    // //     ]        
    // // },    
    // {
    //     idNum : '6',
    //     viewer : 2 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '7',
    //     viewer : 1 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0,    
    //     join:true,
    //     joinsliderid:'22',
    //     joinsliderviewer:1,            
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '8',
    //     viewer : 1 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '9',
    //     // 이동할 갯수
    //     viewer : 4 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:15,
    //     margin:42,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '10',
    //     // 이동할 갯수
    //     viewer : 4 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:20,
    //     margin:32,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '11',
    //     // 이동할 갯수
    //     viewer : 4 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:20,
    //     margin:32,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '12',
    //     // 이동할 갯수
    //     viewer : 1 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '13',
    //     // 이동할 갯수
    //     viewer : 5 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '14',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },    
    // {
    //     idNum : '15',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },   
    {
        idNum : '16',
        // 이동할 갯수
        viewer : 4 ,
        pagination : false,
        numberpage : false,
        gap:25,
        margin:69,
        option : [
            {
                loop : false,     
                autoplay: false,
                speed: '3000'         

            }          
        ]        
    },  
    // {
    //     idNum : '17',
    //     // 이동할 갯수
    //     viewer : 1 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0,
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
    // {
    //     idNum : '18',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },    
    // {
    //     idNum : '19',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },     
    // {
    //     idNum : '20',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },    
    // {
    //     idNum : '21',
    //     viewer : 1 ,
    //     widthauto : true,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:5,                
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },   
    // {
    //     idNum : '22',
    //     viewer : 1 ,
    //     pagination : false,
    //     numberpage : false,
    //     gap:0,
    //     margin:0, 
    //     join:true,
    //     joinsliderid:'7',
    //     joinsliderviewer:1,               
    //     option : [
    //         {
    //             loop : false,     
    //             autoplay: false,
    //             speed: '3000'         

    //         }          
    //     ]        
    // },  
];


function Sliders (sliderSet) {

    //option : setInterval,appendUl,

    let regex = /[^0-9]/gi;
    let sliderWrap;
    let autoplaying;  

    //Slider SetInterval Code
    const sliderInterval = (idNum , autoplay) => {           
        let Slider = document.querySelector(`#slider${idNum}`);   
        // let slidersetIndex = sliderSet[Number(idNum - 1)]; 
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let view = slidersetIndex.viewer;
        let num = Slider.querySelector('.slider-list').getAttribute('index');        
        let sLength = Slider.querySelector('.slider-list').childElementCount / view;  

            if(num <= sLength){                      
                btnNext(Slider);        
            }
            else{            
                clearInterval(`interval${idNum}`);                       
            }   
    }    

    //Slider list length
    const sliderLength = (e , sArea) => {    
        let slider = sArea;       
        let sAreaId = sArea.getAttribute('id').replace(regex, "");                
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let view = slidersetIndex.viewer;
        let sliderList = slider.querySelector('.slider-body > .slider-list');
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');        
        let child =  sliderListActivebox.length;           
        let next = slider.querySelector('.arrow .next');   
        let count = sliderList.attributes.index.value; 
        let numberpage = slidersetIndex.numberpage;

        if(child > 1){           
            next.classList.add('on');        
            pageIdk(e,count,sArea ,numberpage , view);
            if(sAreaId == 7){

            }
            
            sliderListActivebox.forEach((element,index) => {            
                element.setAttribute('index', index);
            });
            sliderList.setAttribute('index',0);    
            pageDotadd(e, sArea ,slidersetIndex);                        
        }
        if(child <= view){
            next.classList.remove('on');   
        }      
    }

    //SliderUl width
    const sliderWidth = (e , sArea) => {    
        let slider = sArea;
        let sliderBody = slider.querySelector('.slider-body');
        let sliderList = slider.querySelector('.slider-body > .slider-list');
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');        
        let length =  sliderListActivebox.length;
        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let gap = slidersetIndex.gap;
        let listWidth = 0;
        let sliderWidth;
        
        if(sAreaId == '12' && length == 0){
            slider.classList.add('disabled');
        }else {
            slider.classList.remove('disabled');
        }

        sliderListActivebox.forEach(ele=>{
            
            if(sAreaId == '7' || sAreaId == '22'){
                let tablewrap = document.querySelector('.scoretable-wrap').clientWidth;
                let tabletit = document.querySelector('.scoretit-wrap').clientWidth;
                let tabletotal = document.querySelector('.scoretotal-wrap').clientWidth;

                slider.style.width = (tablewrap - tabletit - tabletotal) + 'px';
                ele.style.width = (tablewrap - tabletit - tabletotal) + 'px';    
                listWidth = (tablewrap - tabletit - tabletotal) + listWidth;     

                if(sAreaId == '22'){
                    let outscorehead = document.querySelector('.outscorehead');
                    outscorehead.style.left = `${tabletit}px`;
                }    
            }            
            else {
                if(sAreaId == '13'){
                    sliderWidth = slider.clientWidth;                    
                    ele.style.width = Math.ceil(sliderWidth/5) + 'px'; 
                }else if(sAreaId == '12'){                                                  
                    sliderWidth = slider.clientWidth;
                    sliderBody.style.width = sliderWidth + 'px'; 
                    ele.style.width = sliderWidth + 'px';                     
                }

                listWidth = ele.clientWidth + listWidth;
            }
        } );
        
        
        

        sliderList.style.width = (listWidth + (gap * length)) + 'px';
        sliderList.style.gap = `${gap}px`;

        

    }

    //Create add paging(round)
    const pageDotadd = (e , sArea , slidersetIndex) => {
        let slider = sArea;
        let dotWrap = slider.querySelector('.dot-wrap');
        let dotOn;  
        let paging = slidersetIndex.pagination;
        let view = slidersetIndex.viewer;
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');                
        let length = Math.ceil(sliderListActivebox.length / view);  

        if(paging){
            for(let i = 0; i < length;i++) {
                let a = document.createElement('a');
                
                a.setAttribute('class','dot'+i);
                a.setAttribute('href','#');
                a.setAttribute('index',i);
                
                dotWrap.append(a);
            }
            dotOn = dotWrap.querySelector('a').classList.add('on');
        }    

    }


    //handleEvent paging(round)
    const pageDot = (e,index) => {        
        e.preventDefault();     
        let target = e.currentTarget;
        let sArea = target.closest('.slider-wrap');                
        let count = target.attributes.index.value;
        let sAreaId = sArea.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let numberpage = slidersetIndex.numberpage;
        let paging = slidersetIndex.pagination;    
        let sliderjoin = slidersetIndex.join;
        let sliderjoinviewer = slidersetIndex.joinsliderviewer;
        let view = slidersetIndex.viewer;

        sliderDotEvent(count , sArea , paging);
        moveTo(count , sArea);
        sliderIndexEvent(e,count , sArea); 
        pageIdk(e,count,sArea , numberpage,view);

        if(sliderjoin && (count /sliderjoinviewer) > 0){
            let sliderjoinid = slidersetIndex.joinsliderid;
            sArea = document.querySelector(`#slider${sliderjoinid}`); 
            count = Math.floor(count /sliderjoinviewer);

            sliderDotEvent(count , sArea);
            moveTo(count , sArea);
            sliderIndexEvent(e,count , sArea); 
            pageIdk(e,count,sArea , numberpage,view);
        }
    }


    const sliderIndexEvent = (e , index, sArea) => {
        let slider = sArea;
        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let view = slidersetIndex.viewer;
        let count = index;
        let sliderList = slider.querySelector('.slider-body .slider-list');  
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');                
        let length = Math.ceil(sliderListActivebox.length / view);           
        let prev = slider.querySelector('.arrow .prev');
        let next = slider.querySelector('.arrow .next');

        if(count == 0){        
            prev.classList.remove('on');

            if(0 < length-1){
                next.classList.add('on');   
            }
            if(0 == length-1){
                next.classList.remove('on');   
            }
        }else if(count < length-1 && count > 0 ) {
            prev.classList.add('on');
            next.classList.add('on');
        }else if(0 < length-1 && count == length-1){        
            next.classList.remove('on');
            prev.classList.add('on');
        }    

    }

    const sliderDotEvent = (index, sArea , paging) => {    

        if(paging){
            let count = index;
            let dotWrap = sArea.querySelector('.dot-wrap');        
            let dot = dotWrap.querySelectorAll('a');  
            let target = dotWrap.querySelector('.dot'+count);

            dot.forEach(element => {    
                element.classList.remove('on');
            }); 
            target.classList.add('on');
        }  
    }
    const sliderBoxEvent = (index, sArea , paging) => {    

        if(paging){
            let count = index;
            let dotWrap = sArea.querySelector('.dot-wrap');        
            let dot = dotWrap.querySelectorAll('a');  
            let target = dotWrap.querySelector('.dot'+count);

            dot.forEach(element => {    
                element.classList.remove('on');
            }); 
            target.classList.add('on');
        }  
    }


    // Prev
    const btnPrev = (e) => {  
        let target = e.currentTarget;
        let slider = target.closest('.slider-wrap');      
        let sliderList = slider.querySelector('.slider-body .slider-list');
        let tIndex = sliderList.attributes.index.value;
        let count = tIndex;

        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let view = slidersetIndex.viewer;
        let numberpage = slidersetIndex.numberpage;
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');                
        let length = Math.ceil(sliderListActivebox.length / view);   
        let sliderjoin = slidersetIndex.join;
        let sliderjoinviewer = slidersetIndex.joinsliderviewer; 

        if(count <= length-1){
            count--;    
    
            sliderDotEvent(count , slider);
            moveTo(count , slider);
            sliderIndexEvent(e,count , slider); 
            pageIdk(e,count,slider , numberpage,view);
            targetOnEvent(target , count);
            

            if(sliderjoin && (count /sliderjoinviewer) > -1){
                let sliderjoinid = slidersetIndex.joinsliderid;
                slider = document.querySelector(`#slider${sliderjoinid}`); 
                count = Math.ceil(count /sliderjoinviewer);
                sliderDotEvent(count , slider);
                moveTo(count , slider);
                sliderIndexEvent(e,count , slider); 
                pageIdk(e,count,slider , numberpage,view);
                targetOnEvent(slider , count);
            }
        }        
    }


    // Next
    const btnNext = (e) => {        
        let target = e.isTrusted? e.currentTarget : e;    
        let slider = target.closest('.slider-wrap');     
        let sliderList = slider.querySelector('.slider-body .slider-list');
        let tIndex = sliderList.attributes.index.value;
        let count = tIndex;

        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let view = slidersetIndex.viewer;
        let numberpage = slidersetIndex.numberpage;
        let sliderjoin = slidersetIndex.join;
        let sliderjoinviewer = slidersetIndex.joinsliderviewer;
        
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');                
        let length = Math.ceil(sliderListActivebox.length / view);   

        if(count < length-1){
            count++;    

            sliderDotEvent(count , slider);
            moveTo(count , slider);
            sliderIndexEvent(e,count , slider); 
            pageIdk(e,count,slider , numberpage,view);
            targetOnEvent(target , count);
            

            if(sliderjoin && (count /sliderjoinviewer) > 0){
                let sliderjoinid = slidersetIndex.joinsliderid;
                slider = document.querySelector(`#slider${sliderjoinid}`); 
                count = Math.floor(count /sliderjoinviewer);

                sliderDotEvent(count , slider);
                moveTo(count , slider);
                sliderIndexEvent(e,count , slider); 
                pageIdk(e,count,slider , numberpage,view);
                targetOnEvent(slider , count);
            }

        }
        
         
    }

    //Slider Indicator
    const pageIdk = (e , index ,sArea , numberpage,view) => {

        if(numberpage){

            let slider = sArea;
            let count = index;
            let sliderList = slider.querySelector('.slider-body .slider-list');    
            let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');                
            let length = Math.ceil(sliderListActivebox.length / view);   
            let pageNum = slider.querySelector('.page_num');
            let pageCrt = pageNum.querySelector('.current');
            let pageTt = pageNum.querySelector('.total');   

        
            if(length > 1){   
                pageNum.classList.replace('off','on');
                pageCrt.innerHTML = Number(count) + 1;
                pageTt.innerHTML = length;
            }else {
                pageCrt.innerHTML = '1';
                pageTt.innerHTML = length;
                pageNum.classList.replace('on','off');
            }
        }
    }


    const moveTo = (count , sArea) => {
        let slider = sArea;
        let sliderBody = slider.querySelector('.slider-body');
        let sliderList = slider.querySelector('.slider-body .slider-list');
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');        
        let length =  sliderListActivebox.length;        
        let boxWidth = length !== 0?sliderListActivebox[count].offsetWidth : 0; 
        let sliderListMoveval;
        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let view = slidersetIndex.viewer;
        let gap = slidersetIndex.gap;
        let margin = slidersetIndex.margin;
        let widthauto = slidersetIndex.widthauto;

        sliderList.setAttribute('index',count);     
        
        if(count == 0){            
            sliderList.style.transform = `translateX(${margin}px)`;
        }else {

            if(widthauto){
                let listWidth = 0;
                let listWidthArr = [];
    
                sliderListActivebox.forEach(ele=>{
                    listWidth = ele.clientWidth + listWidth;
                    listWidthArr.push(listWidth);
                } );

                sliderListMoveval = (listWidthArr[count-1] + (gap * count)) - margin;
            }else {
                sliderListMoveval = ((boxWidth + gap) * (count * view)) - margin;
            }  

            if(widthauto){
                if(sliderListMoveval > sliderBody.clientWidth){
                    sliderList.style.transform = `translateX(-${sliderListMoveval}px)`;  

                }else {
                    let prev = slider.querySelector('.arrow .prev');
                    let next = slider.querySelector('.arrow .next');   

                    prev.style.opacity = 0;
                    next.style.opacity = 0;
                }
            }else{
                sliderList.style.transform = `translateX(-${sliderListMoveval}px)`;                       
            }
            
        }
    }
    const defaultX = (e,sArea) => {
        let slider = sArea; 
        let sliderList = slider.querySelector('.slider-body .slider-list');
        let sliderListActivebox = slider.querySelectorAll('.slider-body > .slider-list > .slider-box.active');        

        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];


        let margin = slidersetIndex.margin;
        let widthauto = slidersetIndex.widthauto;

        if(widthauto){
            let listWidth = 0;
            let listWidthArr = [];

            sliderListActivebox.forEach(ele=>{
                listWidth = ele.clientWidth + listWidth;
                listWidthArr.push(listWidth);
            } );            
        } 
        slider.setAttribute('data-x',margin-1);
        sliderList.style.transform = `translateX(${margin}px)`;
    }

    const dargMoveNext = (e, moveval) => {
        
        let target = e.isTrusted? e.currentTarget : e;         
        let slider = target.closest('.slider-wrap');  
        let sliderList = slider.querySelector('.slider-body .slider-list');
        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let margin = slidersetIndex.margin;
        let sliderWidth = slider.clientWidth;
        let sliderListWidth = sliderList.clientWidth;
        let maxMoveval = sliderWidth - sliderListWidth;
        let dataAttrX = parseInt(slider.getAttribute('data-x'));

        if(maxMoveval <= dataAttrX && margin > dataAttrX){
            dataAttrX += i--;
            if(maxMoveval >= dataAttrX){
                slider.setAttribute('data-x',maxMoveval);
                sliderList.style.transform = `translateX(${maxMoveval}px)`;
            }else {
                slider.setAttribute('data-x',dataAttrX);
                sliderList.style.transform = `translateX(${dataAttrX}px)`;   
            }            
            
        }else{
            slider.setAttribute('data-x',maxMoveval);
            sliderList.style.transform = `translateX(${maxMoveval}px)`;  
        }
     
    }

    const dargMovePrev = (e , moveval) => {
        
        let target = e.isTrusted? e.currentTarget : e;         
        let slider = target.closest('.slider-wrap');  
        let sliderList = slider.querySelector('.slider-body .slider-list');
        let sAreaId = slider.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];  
        let margin = slidersetIndex.margin;
        let sliderWidth = slider.clientWidth;
        let sliderListWidth = sliderList.clientWidth;
        let maxMoveval = sliderWidth - sliderListWidth;
        let dataAttrX = parseInt(slider.getAttribute('data-x'));
        
        if(maxMoveval <= dataAttrX && margin > dataAttrX){
            dataAttrX += i++;
            if(maxMoveval >= dataAttrX){
                slider.setAttribute('data-x',maxMoveval);
                sliderList.style.transform = `translateX(${maxMoveval}px)`;
            }else if(margin <= dataAttrX){
                slider.setAttribute('data-x',margin-1);
                sliderList.style.transform = `translateX(${margin}px)`;
            }else {
                slider.setAttribute('data-x',dataAttrX);
                sliderList.style.transform = `translateX(${dataAttrX}px)`;
            }         
            
        } else if((maxMoveval + dataAttrX > margin)){
            slider.setAttribute('data-x',maxMoveval);
            sliderList.style.transform = `translateX(${maxMoveval}px)`;  
        }
        else{
        }
        
    }


    const joinEvent = (e,index) => {        
        e.preventDefault();     
        let target = e.currentTarget;
        let sArea = target.closest('.slider-wrap');                        
        let sAreaId = sArea.getAttribute('id').replace(regex, "");
        let sliderIndex = sliderSet.findIndex((slider) => slider.idNum == sAreaId);
        let slidersetIndex = sliderSet[sliderIndex];
        let numberpage = slidersetIndex.numberpage;
        let paging = slidersetIndex.pagination;    
        let sliderjoin = slidersetIndex.join;
        let sliderjoinviewer = slidersetIndex.joinsliderviewer;
        let view = slidersetIndex.viewer;
        let count = Math.floor((target.attributes.index.value)/view);

            sliderDotEvent(count , sArea);
            moveTo(count , sArea);
            sliderIndexEvent(e,count , sArea); 
            pageIdk(e,count,sArea , numberpage,view);
            targetOnEvent(target , count);
        

        if(sliderjoin && (count /sliderjoinviewer) > 0){

            let sliderjoinid = slidersetIndex.joinsliderid;
            sArea = document.querySelector(`#slider${sliderjoinid}`); 
            count = Math.floor(count /sliderjoinviewer);

            sliderDotEvent(count , sArea);
            moveTo(count , sArea);
            sliderIndexEvent(e,count , sArea); 
            pageIdk(e,count,sArea , numberpage,view);
            targetOnEvent(sArea , count);
        }
    }

    const targetOnEvent = (target , count) => {      

        let sArea = target.classList.contains('.slider-wrap') ? target : target.closest('.slider-wrap');  
        let targetTag = target.classList.contains('slider-box') ? target : sArea.querySelectorAll('.slider-box')[count];                

        let sliderBox = sArea.querySelectorAll('.slider-box');
        sliderBox.forEach(element => {
            element.classList.remove('on');
        });
        targetTag.classList.add('on');
    }

    const defaultTargetOnEvent = (e) => {    
        let target = e.currentTarget;
        let targetWrap = target.closest('.slider-list');
        let boxAll = targetWrap.querySelectorAll('.slider-box');

        boxAll.forEach(element => {
            element.classList.remove('on');
        });

        target.classList.add('on');
    }

   

    // Mouse SetInterval Control    
    const stopInterval = (e) => {
        sliderWrap = e.target.closest('.slider-wrap');

        if(sliderWrap){           
            autoplaying =  sliderWrap.getAttribute('data-auto');
            
            if(autoplaying){                                   
                idNum = sliderWrap.getAttribute('id').replace(regex, "");
                clearInterval(window[`interval${idNum}`]);          
            }
        }    
    }

    const startInterval = (e) => {
        sliderWrap = e.target.closest('.slider-wrap');

        if(sliderWrap){ 
            autoplaying = sliderWrap.getAttribute('data-auto');
            
            if(autoplaying == 'true'){                      
                idNum = sliderWrap.getAttribute('id').replace(regex, "");
                window[`interval${idNum}`] = setInterval(sliderInterval,5000, `${String(idNum)}`,true);                
            }
        }     
    }

    let scrXStr;
    let touchMoveArr = [];
    let scrXmove;
    let scrXmoveEnd;
    let scrmoveArr = [];
    let moveval;
    let i;
    const touchstart = (e) => {
        scrXStr = e.changedTouches[0].screenX;   
        stopInterval(e);
        i = 0;
    }
    const touchMove = (e) => {    
        stopInterval(e);
    }
    const touchEnd = (e) => {   
        let scrXEnd = e.changedTouches[0].screenX;
        let slider7 = e.currentTarget.closest('#slider7');
        let slider22 = e.currentTarget.closest('#slider22');
        let sliderList = e.currentTarget.querySelector('.slider-list');
        let count = sliderList.attributes.index.value;
        let length = sliderList.childElementCount - 1;


        if(scrXStr > scrXEnd && count < length) {
            if((slider7 || slider22) && Math.abs(scrXStr - scrXEnd) < 200){                
                return;
            }
            btnNext(e);
            startInterval(e);
        }else if(scrXStr < scrXEnd && count  > 0){    
            if((slider7 || slider22) && Math.abs(scrXStr - scrXEnd) < 200){
                return;
            }    
            btnPrev(e);
            startInterval(e);
        }   
    }
    const touchMovedrag = (e) => {

        touchMoveArr.push(e.touches[0].clientX);     
        moveval = Math.floor(touchMoveArr[touchMoveArr.length - 1]) - Math.floor(touchMoveArr[touchMoveArr.length - 2]);
        
        if(Math.floor(touchMoveArr[touchMoveArr.length-2]) > Math.floor(touchMoveArr[touchMoveArr.length - 1]) &&  Math.abs(moveval) >= 1) {
            dargMoveNext(e , Math.abs(moveval));        
        }else if(Math.floor(touchMoveArr[touchMoveArr.length-2]) < Math.floor(touchMoveArr[touchMoveArr.length - 1]) &&  Math.abs(moveval) >= 1){        
            dargMovePrev(e , Math.abs(moveval));   
        }  

        
    }
    const touchEnddrag = (e) => {  
        scrmoveArr = [];
        touchMoveArr = [];

    }

    const init = (ele) => {
        let idName = ele.idNum;
        Slider = document.querySelector(`#slider${idName}`);          
        let sliderList = Slider.querySelector('.slider-body > .slider-list');   
        let count = sliderList.attributes.index.value;           
        
        sliderLength(bin,Slider);
        sliderWidth(bin,Slider);  

        if(Slider.classList.contains('slider-drag')){            
            defaultX(bin , Slider);            
        }else {
            moveTo(count , Slider);                 
        }       
    }


    //Event
    let sliderArea = document.querySelectorAll('.slider-wrap');
    let sliderbasicArea = document.querySelectorAll('.slider-basic');
    let sliderdragArea = document.querySelectorAll('.slider-drag');
    let sliderName = [];

    sliderArea.forEach(ele => {
        let idName = ele.getAttribute('id');
        sliderName.push(idName);              
    });

    let Slider;   
    let bin;    

    //First Action        

        sliderSet.forEach((ele) => {   
            init(ele);
        }); 
    
    
    let dot;        
    //Indicator click
    dot = document.querySelectorAll('.dot-wrap a');
    dot.forEach(element => {    
        element.addEventListener('click',pageDot);
    });     
    
    //Prev , Next click
    let prev = document.querySelectorAll('.arrow > .prev');
    prev.forEach(element => {
        element.addEventListener('click',btnPrev);    
    });    

    let next = document.querySelectorAll('.arrow > .next');
    next.forEach(element => {
        element.addEventListener('click',btnNext);    
    });
    
    let sliderJoinBox = document.querySelectorAll('.slider-wrap.join .slider-box.active');
    sliderJoinBox.forEach(element => {
        element.addEventListener('click',joinEvent);
    })

    let sliderBox = document.querySelectorAll('.slider-wrap .slider-box.active');
    sliderBox.forEach(element => {
        element.addEventListener('click',defaultTargetOnEvent);
    })

    //Slider SetInterval Function 
    sliderSet.forEach(slider => {       

        Slider = document.querySelector(`#slider${slider.idNum}`);                          

        if(slider.option[0].autoplay){            
            window[`interval${slider.idNum}`] = setInterval(sliderInterval,slider.option[0].speed,slider.idNum,slider.option[0].autoplay);                          
        }
        Slider.setAttribute('data-auto',slider.option[0].autoplay); 
    });   

    window.addEventListener('mouseover',stopInterval);   
    window.addEventListener('mouseout',function(e){        
        startInterval(e);      
    });    
    
    sliderbasicArea.forEach(element => {
        element.addEventListener('touchstart',touchstart);
        element.addEventListener('touchmove',touchMove);
        element.addEventListener('touchend',touchEnd);        
    });

    // sliderdragArea.forEach(element => {
    //     element.addEventListener('touchstart',touchstart);
    //     element.addEventListener('touchmove',touchMovedrag);
    //     element.addEventListener('touchend',touchEnddrag);        
    // });

    window.addEventListener('resize',function(e){

        sliderArea.forEach(ele => {            
            let sliderList = ele.querySelector('.slider-body .slider-list');            
            let count = sliderList.attributes.index.value;    

            sliderWidth(bin,ele);    
            moveTo(count , ele);         
        });
        
    });
}

















